import React from 'react'
import { render, fireEvent, wait } from '@testing-library/react'
import '@testing-library/jest-dom/extend-expect'
import PaymentPage from '.'
import userEvent from '@testing-library/user-event'
import axios from 'axios'

describe('tests PaymentPage', () => {
  test('Render price products', () => {
    //Preparação

    const { getByText, localStorage } = render(<PaymentPage />)

    localStorage.getItem = jest
      .fn()
      .mockReturnValue(
        '{"id":"5b15c171e4b0023bb624f616","items":[{"quantity":1,"product":{"sku":"3019","name":"Senscience Inner Restore Intensif - Máscara Capilar 50ml","imageObjects":[{"featured":true,"thumbnail":"https://res.cloudinary.com/beleza-na-web/image/upload/f_auto,fl_progressive,q_auto:best/v1/imagens/1/senscience-inner-restore-intesif-deep-repairing-masque-mascara-de-tratamento-50ml-3019-7903251722539384904.png","small":"https://res.cloudinary.com/beleza-na-web/image/upload/f_auto,fl_progressive,q_auto:best/v1/imagens/2/senscience-inner-restore-intesif-deep-repairing-masque-mascara-de-tratamento-50ml-3019-7903251722539384904.png","medium":"https://res.cloudinary.com/beleza-na-web/image/upload/f_auto,fl_progressive,q_auto:best/v1/imagens/6/senscience-inner-restore-intesif-deep-repairing-masque-mascara-de-tratamento-50ml-3019-7903251722539384904.png","large":"https://res.cloudinary.com/beleza-na-web/image/upload/f_auto,fl_progressive,q_auto:best/v1/imagens/4/senscience-inner-restore-intesif-deep-repairing-masque-mascara-de-tratamento-50ml-3019-7903251722539384904.png","extraLarge":"https://res.cloudinary.com/beleza-na-web/image/upload/f_auto,fl_progressive,q_auto:best/v1/imagens/5/senscience-inner-restore-intesif-deep-repairing-masque-mascara-de-tratamento-50ml-3019-7903251722539384904.png","valid":true}],"priceSpecification":{"sku":"3019","price":99.9,"originalPrice":99.9,"maxPrice":99.9,"percent":0,"discount":0}}}],"subTotal":624.8,"shippingTotal":5.3,"discount":30,"total":618.9}'
      )

    expect(localStorage.getItem).toHaveBeenCalledWith('infoCart')
    expect(getByText(/624/i)).toBeInTheDocument()
  })
})
